var x=document.getElementById("status");$("#form-enter-name").submit(function(a){return""===$("#form-enter-name input[name=longitude]").val()?(a.preventDefault(),$("button.btn-primary").click(),!1):!0});$("#button-showme").click(function(){$(this).hasClass("active")||(navigator.geolocation?(navigator.geolocation.getCurrentPosition(showMe,showError),$(this).addClass("disabled")):x.innerHTML="<div id='text-status-mini' class='alert-error'>Geolocation is not supported by this browser.</div>")});
function getLocation(){if(""==$.trim($("input[name=name]").val()))return x.innerHTML="<div id='text-status' class='alert-error'><span class='text-error'>Please enter your name.</span></div>",!1;if("<3iloveyou<3"==$("input[name=name]").val()||"iloveyou"==$("input[name=name]").val())return x.innerHTML="<div id='text-status' class='alert-success'><span class='text-success'>I love you, too! :)</span></div>",!1;if("admin"==$("input[name=name]").val())return x.innerHTML="<div id='text-status' class='alert-error'><span class='text-error'>You are not an admin. Stop fooling me!</span></div>",
!1;if(1==$.trim($("input[name=name]").val()).length)return x.innerHTML="<div id='text-status' class='alert-error'><span class='text-error'>Your name is too short. You must be a lazy guy.</span></div>",!1;navigator.geolocation?(navigator.geolocation.getCurrentPosition(showPosition,showError),x.innerHTML="<div id='text-status' class='alert-info'><span class='text'>Please share your location!</span></div>"):x.innerHTML="<div id='text-status' class='alert-error'>Geolocation is not supported by this browser.</div>"}
function showPosition(a){$("#longitude").val(a.coords.longitude);$("#latitude").val(a.coords.latitude);x.innerHTML="<div id='text-status' class='alert-success'>Let's go!</div>";$("#form-enter-name").submit()}
function showError(a){switch(a.code){case a.PERMISSION_DENIED:x.innerHTML="<div id='text-status' class='alert-error'>User denied the request for Geolocation.</div>";break;case a.POSITION_UNAVAILABLE:x.innerHTML="<div id='text-status' class='alert-error'>Location information is unavailable.</div>";break;case a.TIMEOUT:x.innerHTML="<div id='text-status' class='alert-error'>The request to get user location timed out.</div>";break;case a.UNKNOWN_ERROR:x.innerHTML="<div id='text-status' class='alert-error'>An unknown error occurred.</div>"}}
function isExact(a){$.ajax({type:"POST",url:"/record/feedback",dataType:"json",data:{code:a,answer:"yes",q:1},cache:!1,success:function(){replace="<div class='info text-error'><small></small><div class='input-append question'><input type='text' placeholder='What function would you like to have or suggest me to make?' id='user_position' class='span5'> <button class='btn btn-primary' onclick=\"savePosition('"+a+"')\">Save</button></div></div>";$("#question").html(replace)},error:function(){}})}
function notExact(a){$.ajax({type:"POST",url:"/record/feedback",dataType:"json",data:{code:a,answer:"no",q:1},cache:!1,success:function(){replace="<div class='info text-error'><small></small><div class='input-append question'><input type='text' placeholder='Which device do you use?' id='user_position'> <button class='btn btn-primary' onclick=\"savePosition('"+a+"')\">Save</button></div></div>";$("#question").html(replace)},error:function(){}})}
function savePosition(a){answer=$("#user_position").val();$.ajax({type:"POST",url:"/record/feedback",dataType:"json",data:{code:a,answer:answer,q:2},cache:!1,success:function(){replace="<div class='info text-error'><small>Thank you!</small></div>";$("#question").html(replace)},error:function(){}})}function share_link(){replace="<input type='text' selected value='http://"+$("#share-link").html()+"'>";$("#share-link").html(replace);$("#share-link").removeClass("share-link")}
function selectText(a){var b=document;a=b.getElementById(a);var c;b.body.createTextRange?(b=b.body.createTextRange(),b.moveToElementText(a),b.select()):window.getSelection&&(c=window.getSelection(),b=b.createRange(),b.selectNodeContents(a),c.removeAllRanges(),c.addRange(b))};